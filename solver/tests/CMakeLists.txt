file(GLOB SOLVER_SOURCES test_solver.cpp ${CMAKE_SOURCE_DIR}/smt/*.cpp ${CMAKE_SOURCE_DIR}/smt/lra/*.cpp ${CMAKE_SOURCE_DIR}/smt/ov/*.cpp ${CMAKE_SOURCE_DIR}/riddle/*.cpp ${CMAKE_SOURCE_DIR}/core/*.cpp ${CMAKE_SOURCE_DIR}/solver/*.cpp ${CMAKE_SOURCE_DIR}/solver/types/*.cpp)

if(BUILD_GUI)
    list(APPEND SOLVER_SOURCES ${CMAKE_SOURCE_DIR}/java-api/src/main/cpp/socket_listener.cpp)
endif()

add_executable(solver_tests ${SOLVER_SOURCES})

if(BUILD_GUI AND WIN32)
    target_link_libraries(solver_tests wsock32 ws2_32 #[[-PROFILE]])
endif()

add_test(NAME SolverTest00 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/example_0.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME SolverTest01 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/example_1.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME SolverTest02 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/example_2.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME SolverTest03 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/test_heuristic_0.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME SolverTest04 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/test_heuristic_1.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME SolverTest05 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/test_heuristic_2.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME SolverTest06 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/test_heuristic_3.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME SolverTest07 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/test_rr_0.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME SolverTest08 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/test_rr_1.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME SolverTest09 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/test_sv_0.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME SolverTest10 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/test_sv_1.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME SolverTest11 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/test_sv_2.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})

set_tests_properties(SolverTest02 SolverTest03 SolverTest04 PROPERTIES WILL_FAIL TRUE)

add_test(NAME SolverTest12 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/test_cyclic_causality_0.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME SolverTest13 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/test_cyclic_causality_1.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME SolverTest14 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/test_cyclic_causality_2.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME SolverTest15 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/test_cyclic_causality_3.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
#add_test(NAME SolverTest12 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/test_sv_3.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})

add_test(NAME TestBlocks02 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_problem_02.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME TestBlocks03 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_problem_03.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME TestBlocks04 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_problem_04.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME TestBlocks05 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_problem_05.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME TestBlocks06 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_problem_06.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME TestBlocks07 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_problem_07.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME TestBlocks08 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_problem_08.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME TestBlocks09 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_problem_09.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME TestBlocks10 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_problem_10.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME TestBlocks11 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_problem_11.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME TestBlocks12 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_problem_12.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME TestBlocks13 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_problem_13.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME TestBlocks14 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_problem_14.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME TestBlocks15 COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/blocks/blocks_problem_15.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})

add_test(NAME GOAC_1Pic_1Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_1pic_1wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_1Pic_2Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_1pic_2wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_1Pic_3Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_1pic_3wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_1Pic_4Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_1pic_4wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_1Pic_5Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_1pic_5wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_2Pic_1Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_2pic_1wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_2Pic_2Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_2pic_2wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_2Pic_3Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_2pic_3wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_2Pic_4Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_2pic_4wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_2Pic_5Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_2pic_5wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_3Pic_1Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_3pic_1wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_3Pic_2Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_3pic_2wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_3Pic_3Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_3pic_3wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_3Pic_4Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_3pic_4wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_3Pic_5Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_3pic_5wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_4Pic_1Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_4pic_1wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_4Pic_2Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_4pic_2wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_4Pic_3Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_4pic_3wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_4Pic_4Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_4pic_4wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_4Pic_5Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_4pic_5wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_5Pic_1Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_5pic_1wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_5Pic_2Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_5pic_2wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_5Pic_3Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_5pic_3wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_5Pic_4Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_5pic_4wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
add_test(NAME GOAC_5Pic_5Wind COMMAND solver_tests "${CMAKE_SOURCE_DIR}/examples/goac/goac_domain.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/map.rddl" "${CMAKE_SOURCE_DIR}/examples/goac/goac_5pic_5wind.rddl" "solution.json" WORKING_DIRECTORY ${CMAKE_BINARY_DIR})
